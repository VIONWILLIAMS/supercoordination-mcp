# 短邮系统全面测试计划
## 端到端测试 + 数据同步验证

**测试时间**: 2026-02-02 21:55
**测试范围**: 移动端 + 桌面端 + 数据同步
**测试账号**: admin@supercoordination.com / admin123

---

## 🎯 测试目标

1. ✅ 验证移动端所有功能正常
2. ✅ 验证桌面端所有功能正常
3. ✅ 验证桌面↔移动数据同步
4. ✅ 发现并记录所有问题
5. ✅ 验证用户体验流畅度

---

## 📋 测试清单

### 阶段1: 移动端功能测试

#### 1.1 登录功能 ⬜
```
URL: http://localhost:3000/shortmail-login.html

测试步骤：
1. [ ] 访问登录页面
2. [ ] 验证页面正常加载
3. [ ] 输入邮箱: admin@supercoordination.com
4. [ ] 输入密码: admin123
5. [ ] 点击"登录"按钮
6. [ ] 验证显示"登录中..."加载状态
7. [ ] 验证成功跳转到 /shortmail-app.html
8. [ ] 验证localStorage存储了token和user

预期结果：
✅ 页面加载正常
✅ 表单验证正确
✅ 登录成功跳转
✅ Token正确保存
✅ 用户信息正确保存

问题记录：
___________________________________
```

#### 1.2 收件箱加载 ⬜
```
URL: http://localhost:3000/shortmail-app.html

测试步骤：
1. [ ] 确保已登录
2. [ ] 验证默认显示"收件箱"标签
3. [ ] 验证显示loading动画
4. [ ] 等待数据加载
5. [ ] 验证显示待决策列表
6. [ ] 检查短邮卡片内容：
   - [ ] 发送者头像/名称
   - [ ] 项目标签
   - [ ] 决策摘要
   - [ ] 相对时间（如"2小时前"）
   - [ ] AI建议框（如果有）
7. [ ] 验证空状态（如果无数据）

预期结果：
✅ Loading动画正常显示
✅ 数据正确加载
✅ 卡片信息完整
✅ 时间格式正确
✅ AI建议正确显示

问题记录：
___________________________________
```

#### 1.3 决策详情模态框 ⬜
```
测试步骤：
1. [ ] 点击收件箱中的短邮卡片
2. [ ] 验证模态框从底部滑出
3. [ ] 验证显示完整信息：
   - [ ] 发送者信息
   - [ ] 发送时间
   - [ ] 决策摘要
   - [ ] 详细内容
   - [ ] AI建议框
   - [ ] 评论输入框
   - [ ] 提交按钮
4. [ ] 点击背景关闭模态框
5. [ ] 验证模态框正确关闭

预期结果：
✅ 模态框动画流畅
✅ 所有信息完整显示
✅ 交互正常
✅ 关闭功能正常

问题记录：
___________________________________
```

#### 1.4 快速响应决策 ⬜
```
测试步骤：
1. [ ] 在收件箱中找到待响应的短邮
2. [ ] 点击AI建议的某个选项（如"批准"）
3. [ ] 验证显示Toast提示
4. [ ] 验证收件箱自动刷新
5. [ ] 验证该短邮消失或状态变化

预期结果：
✅ 点击响应流畅
✅ Toast提示正确显示
✅ 自动刷新成功
✅ 状态更新正确

问题记录：
___________________________________
```

#### 1.5 模态框响应决策 ⬜
```
测试步骤：
1. [ ] 打开决策详情模态框
2. [ ] 选择一个AI建议选项
3. [ ] 在评论框输入评论
4. [ ] 点击"提交"按钮
5. [ ] 验证Toast提示
6. [ ] 验证模态框关闭
7. [ ] 验证收件箱刷新

预期结果：
✅ 选项选择正常
✅ 评论输入正常
✅ 提交成功
✅ 反馈及时
✅ 数据更新

问题记录：
___________________________________
```

#### 1.6 创建决策请求 ⬜
```
测试步骤：
1. [ ] 点击右下角"+"按钮
2. [ ] 验证创建模态框打开
3. [ ] 选择项目
4. [ ] 验证接收人列表自动加载
5. [ ] 选择接收人
6. [ ] 选择决策类型
7. [ ] 填写摘要："测试决策-移动端创建"
8. [ ] 填写详细内容
9. [ ] 点击"发送"按钮
10. [ ] 验证Toast提示
11. [ ] 验证模态框关闭

预期结果：
✅ 模态框正常打开
✅ 项目成员正确加载
✅ 表单验证正确
✅ 提交成功
✅ Toast提示显示

问题记录：
___________________________________
记录创建的决策ID: _______________
```

#### 1.7 决策链查看 ⬜
```
测试步骤：
1. [ ] 点击"决策链"标签
2. [ ] 验证显示loading动画
3. [ ] 等待数据加载
4. [ ] 验证显示对话线程列表
5. [ ] 检查每个线程：
   - [ ] 对话摘要
   - [ ] 时间轴节点
   - [ ] 事件图标
   - [ ] 用户信息
   - [ ] 连接线
6. [ ] 验证时间排序（最新在上）

预期结果：
✅ 数据正确加载
✅ 对话线程分组正确
✅ 时间轴可视化清晰
✅ 排序正确

问题记录：
___________________________________
```

---

### 阶段2: 桌面端功能测试

#### 2.1 项目详情页访问 ⬜
```
URL: http://localhost:3000/project-detail.html?id={projectId}

测试步骤：
1. [ ] 访问项目详情页
2. [ ] 验证页面正常加载
3. [ ] 验证显示三个标签：
   - [ ] 📋 任务看板
   - [ ] 💬 决策交流
   - [ ] 👥 团队管理

预期结果：
✅ 页面加载正常
✅ 标签显示正确
✅ 默认标签状态正确

问题记录：
___________________________________
```

#### 2.2 决策交流标签页 ⬜
```
测试步骤：
1. [ ] 点击"💬 决策交流"标签
2. [ ] 验证标签切换动画
3. [ ] 验证显示loading状态
4. [ ] 等待数据加载
5. [ ] 验证页面结构：
   - [ ] 页头（标题+创建按钮）
   - [ ] 过滤器（3个按钮+计数）
   - [ ] 决策时间线
6. [ ] 检查决策线程卡片：
   - [ ] 左侧彩色边框
   - [ ] 线程标题
   - [ ] 元数据（发送者/时间/状态）
   - [ ] 内容区域
   - [ ] 时间轴
7. [ ] 验证hover效果

预期结果：
✅ 标签切换流畅
✅ 数据正确加载
✅ 布局美观
✅ 所有信息完整
✅ 交互效果正常

问题记录：
___________________________________
```

#### 2.3 决策过滤功能 ⬜
```
测试步骤：
1. [ ] 点击"全部"按钮
2. [ ] 验证显示所有决策
3. [ ] 检查计数是否正确
4. [ ] 点击"待响应"按钮
5. [ ] 验证只显示active状态的决策
6. [ ] 检查计数是否正确
7. [ ] 点击"已响应"按钮
8. [ ] 验证只显示responded状态的决策
9. [ ] 检查计数是否正确

预期结果：
✅ 过滤功能正常
✅ 计数准确
✅ 按钮状态切换正确
✅ 显示内容符合过滤条件

问题记录：
___________________________________
```

#### 2.4 桌面端快速响应 ⬜
```
测试步骤：
1. [ ] 找到待响应的决策（AI建议框可见）
2. [ ] 点击AI建议选项
3. [ ] 验证Toast提示
4. [ ] 验证数据自动刷新
5. [ ] 验证状态更新为"已响应"
6. [ ] 验证时间轴显示响应节点

预期结果：
✅ 快速响应成功
✅ Toast提示显示
✅ 自动刷新
✅ 状态更新正确
✅ 时间轴更新

问题记录：
___________________________________
```

#### 2.5 桌面端手动响应 ⬜
```
测试步骤：
1. [ ] 找到待响应的决策（响应表单可见）
2. [ ] 在评论框输入评论
3. [ ] 点击"提交响应"按钮
4. [ ] 输入决策内容（prompt）
5. [ ] 确认提交
6. [ ] 验证Toast提示
7. [ ] 验证数据刷新
8. [ ] 验证响应显示在时间轴上

预期结果：
✅ 评论输入正常
✅ Prompt对话框显示
✅ 提交成功
✅ Toast提示
✅ 响应正确记录

问题记录：
___________________________________
```

#### 2.6 桌面端创建决策请求 ⬜
```
测试步骤：
1. [ ] 点击"📤 创建决策请求"按钮
2. [ ] 验证prompt对话框：选择接收人
3. [ ] 输入接收人序号
4. [ ] 验证prompt对话框：输入摘要
5. [ ] 输入："测试决策-桌面端创建"
6. [ ] 验证prompt对话框：输入详细内容
7. [ ] 输入详细内容
8. [ ] 验证Toast提示
9. [ ] 验证数据自动刷新
10. [ ] 验证新决策出现在列表中

预期结果：
✅ 创建流程顺畅
✅ Prompt对话框正常
✅ 提交成功
✅ Toast提示显示
✅ 新决策可见

问题记录：
___________________________________
记录创建的决策ID: _______________
```

---

### 阶段3: 数据同步验证 ⭐核心

#### 3.1 桌面创建 → 移动查看 ⬜
```
测试步骤：
1. [ ] 在桌面端创建决策请求
   - 接收人：admin（自己）
   - 摘要："同步测试1-桌面创建"
   - 记录创建时间
2. [ ] 立即打开移动端shortmail-app.html
3. [ ] 查看收件箱
4. [ ] 验证新决策出现
5. [ ] 验证所有信息一致：
   - [ ] 摘要
   - [ ] 发送者
   - [ ] 时间
   - [ ] AI建议
   - [ ] 详细内容

同步延迟: _______ 秒
数据一致性: ✅ / ❌

预期结果：
✅ 移动端立即可见（刷新后）
✅ 所有数据完全一致
✅ AI建议正确生成

问题记录：
___________________________________
```

#### 3.2 移动创建 → 桌面查看 ⬜
```
测试步骤：
1. [ ] 在移动端创建决策请求
   - 接收人：选择项目成员
   - 摘要："同步测试2-移动创建"
   - 记录创建时间
2. [ ] 立即打开桌面端project-detail.html
3. [ ] 切换到"决策交流"标签
4. [ ] 验证新决策出现
5. [ ] 验证所有信息一致

同步延迟: _______ 秒
数据一致性: ✅ / ❌

预期结果：
✅ 桌面端立即可见
✅ 所有数据完全一致

问题记录：
___________________________________
```

#### 3.3 移动响应 → 桌面查看 ⬜
```
测试步骤：
1. [ ] 在移动端响应一个决策
   - 选择AI建议选项
   - 添加评论
   - 提交
   - 记录响应时间
2. [ ] 立即刷新桌面端
3. [ ] 验证决策状态更新为"已响应"
4. [ ] 验证响应节点出现在时间轴
5. [ ] 验证响应内容完整：
   - [ ] 决策选项
   - [ ] 评论内容
   - [ ] 响应者
   - [ ] 响应时间

同步延迟: _______ 秒
数据一致性: ✅ / ❌

预期结果：
✅ 状态立即更新
✅ 响应完整显示
✅ 时间轴正确

问题记录：
___________________________________
```

#### 3.4 桌面响应 → 移动查看 ⬜
```
测试步骤：
1. [ ] 在桌面端响应一个决策
   - 快速响应或手动响应
   - 记录响应时间
2. [ ] 立即刷新移动端
3. [ ] 验证收件箱中该决策消失（或状态变化）
4. [ ] 切换到"决策链"标签
5. [ ] 找到对应的对话线程
6. [ ] 验证响应节点存在
7. [ ] 验证响应内容完整

同步延迟: _______ 秒
数据一致性: ✅ / ❌

预期结果：
✅ 移动端立即更新
✅ 收件箱状态正确
✅ 决策链完整

问题记录：
___________________________________
```

#### 3.5 决策链完整性验证 ⬜
```
测试步骤：
1. [ ] 创建一个新的决策请求（任意端）
2. [ ] 响应该决策（另一端）
3. [ ] 在移动端查看决策链
4. [ ] 在桌面端查看决策交流
5. [ ] 验证两端显示的对话线程：
   - [ ] conversationId相同
   - [ ] 节点数量相同
   - [ ] 节点顺序相同
   - [ ] 所有信息一致
6. [ ] 验证时间轴完整性

数据一致性: ✅ / ❌

预期结果：
✅ conversationId正确关联
✅ 对话线程完全一致
✅ 时间轴排序正确
✅ 无数据丢失

问题记录：
___________________________________
```

#### 3.6 并发场景测试 ⬜
```
测试步骤：
1. [ ] 打开两个浏览器窗口
   - 窗口A：桌面端
   - 窗口B：移动端
2. [ ] 在窗口A创建决策
3. [ ] 立即在窗口B刷新
4. [ ] 验证数据同步
5. [ ] 在窗口B响应决策
6. [ ] 立即在窗口A刷新
7. [ ] 验证数据同步

预期结果：
✅ 并发操作不冲突
✅ 数据正确同步
✅ 无数据覆盖问题

问题记录：
___________________________________
```

---

### 阶段4: 边界情况测试

#### 4.1 空状态测试 ⬜
```
测试步骤：
1. [ ] 清空所有决策记录（或使用新项目）
2. [ ] 移动端查看收件箱
   - [ ] 验证显示空状态提示
3. [ ] 桌面端查看决策交流
   - [ ] 验证显示空状态提示
4. [ ] 移动端查看决策链
   - [ ] 验证显示空状态提示

预期结果：
✅ 空状态提示友好
✅ 图标和文字清晰
✅ 无错误发生

问题记录：
___________________________________
```

#### 4.2 权限控制测试 ⬜
```
测试步骤：
1. [ ] 创建决策请求给另一个用户
2. [ ] 用创建者账号查看该决策
3. [ ] 验证不显示响应表单
4. [ ] 验证不显示AI建议（对创建者）
5. [ ] 用接收者账号登录
6. [ ] 验证显示响应表单
7. [ ] 验证显示AI建议

预期结果：
✅ 权限控制正确
✅ 仅接收者可响应
✅ 创建者无响应权限

问题记录：
___________________________________
```

#### 4.3 长文本测试 ⬜
```
测试步骤：
1. [ ] 创建决策请求
   - 摘要：50字以上
   - 内容：500字以上
2. [ ] 在移动端查看
   - [ ] 验证文字不溢出
   - [ ] 验证滚动正常
3. [ ] 在桌面端查看
   - [ ] 验证布局正常
   - [ ] 验证可读性

预期结果：
✅ 长文本显示正常
✅ 布局不破坏
✅ 滚动流畅

问题记录：
___________________________________
```

#### 4.4 网络错误测试 ⬜
```
测试步骤：
1. [ ] 断开网络
2. [ ] 尝试加载收件箱
3. [ ] 验证错误提示
4. [ ] 尝试响应决策
5. [ ] 验证错误提示
6. [ ] 恢复网络
7. [ ] 验证重新加载成功

预期结果：
✅ 错误提示友好
✅ 不崩溃
✅ 恢复后正常

问题记录：
___________________________________
```

---

## 📊 测试结果汇总

### 移动端测试结果
```
登录功能:        ⬜ 通过 / ⬜ 失败
收件箱加载:      ⬜ 通过 / ⬜ 失败
决策详情:        ⬜ 通过 / ⬜ 失败
快速响应:        ⬜ 通过 / ⬜ 失败
模态框响应:      ⬜ 通过 / ⬜ 失败
创建决策:        ⬜ 通过 / ⬜ 失败
决策链查看:      ⬜ 通过 / ⬜ 失败
```

### 桌面端测试结果
```
页面访问:        ⬜ 通过 / ⬜ 失败
标签切换:        ⬜ 通过 / ⬜ 失败
决策展示:        ⬜ 通过 / ⬜ 失败
过滤功能:        ⬜ 通过 / ⬜ 失败
快速响应:        ⬜ 通过 / ⬜ 失败
手动响应:        ⬜ 通过 / ⬜ 失败
创建决策:        ⬜ 通过 / ⬜ 失败
```

### 数据同步测试结果
```
桌面→移动:       ⬜ 通过 / ⬜ 失败
移动→桌面:       ⬜ 通过 / ⬜ 失败
移动响应→桌面:   ⬜ 通过 / ⬜ 失败
桌面响应→移动:   ⬜ 通过 / ⬜ 失败
决策链一致性:    ⬜ 通过 / ⬜ 失败
并发操作:        ⬜ 通过 / ⬜ 失败
```

### 边界情况测试结果
```
空状态:          ⬜ 通过 / ⬜ 失败
权限控制:        ⬜ 通过 / ⬜ 失败
长文本:          ⬜ 通过 / ⬜ 失败
网络错误:        ⬜ 通过 / ⬜ 失败
```

---

## 🐛 问题汇总

### 严重问题 (P0 - 必须修复)
```
1. ___________________________________
2. ___________________________________
3. ___________________________________
```

### 重要问题 (P1 - 应该修复)
```
1. ___________________________________
2. ___________________________________
3. ___________________________________
```

### 轻微问题 (P2 - 可以延后)
```
1. ___________________________________
2. ___________________________________
3. ___________________________________
```

---

## ✅ 测试结论

### 总体评价
```
功能完整性:  ⬜ 优秀 / ⬜ 良好 / ⬜ 需改进
数据同步:    ⬜ 完美 / ⬜ 良好 / ⬜ 有问题
用户体验:    ⬜ 优秀 / ⬜ 良好 / ⬜ 需改进
稳定性:      ⬜ 稳定 / ⬜ 基本稳定 / ⬜ 不稳定
```

### 是否可以发布
```
⬜ 可以立即发布
⬜ 修复问题后发布
⬜ 需要重大改进
```

### 下一步建议
```
___________________________________
___________________________________
___________________________________
```

---

**测试执行者**: _____________
**测试完成时间**: _____________
**总耗时**: _____________

